---
title: 【BZOJ1878】【SDOI2009】HH的项链
date: 2016-06-18 12:00:00
mathjax: true
toc: false
tags:
- 树状数组
- 离线 
---

离线处理+树状数组即可。

<!-- more -->

将询问按照左端点从小到大排序,之后从左到右扫一遍,$t[i]$表示贝壳$i$是否是还没扫过的贝壳中这种颜色的贝壳的第一次出现.

预处理$next[i]​$表示$a[i]​$这种颜色的贝壳下一次出现的地方.一开始先把每个颜色第一次出现的贝壳$i​$的$t[i]​$加上$1​$.对于每个扫过的贝壳,给$t[next[i]]​$加上$1​$.

用树状数组维护$t[i]$,询问的答案就是$\sum\limits_{i=l}^r{t[i]}$.

于是这题就做完啦.

时间复杂度$O((m+n)\log n)$.

[Code](https://github.com/q234rty/OJ-Codes/blob/master/BZOJ/1878.cpp)







